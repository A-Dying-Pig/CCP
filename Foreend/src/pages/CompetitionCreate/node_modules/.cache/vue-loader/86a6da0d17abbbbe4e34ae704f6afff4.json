{"remainingRequest":"D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\src\\components\\CompetitionInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\src\\components\\CompetitionInfo.vue","mtime":1542284811822},{"path":"D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\我\\tsinghua\\大三上\\软件工程（3）\\软工\\CCP\\Foreend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport ElementUI from 'element-ui'\r\nVue.use(ElementUI);\r\n\r\nimport CompetitonStage from './CompetitonStage'\r\nexport default {\r\n    components:{\r\n        CompetitonStage,\r\n    },\r\n    props:['finfo','typeid'],\r\n    data:function () {\r\n        var self=this;\r\n        let testVali = function (rule,value,callback) {\r\n            console.log(value);\r\n            callback();\r\n        };\r\n        let holderVali = function (rule,value,callback) {\r\n            for (let onename of value){\r\n                if(onename.length==0){\r\n                    callback(new Error('名称不能为空'));\r\n                    return;\r\n                }\r\n                if(onename.length>30){\r\n                    callback(new Error('名称不超过30个字符'));\r\n                    return;\r\n                }\r\n            }\r\n          callback();\r\n        };\r\n        let signupVali = function (rule, value, callback) {\r\n            for (let onename of value){\r\n                if(onename.length==0){\r\n                    callback(new Error('名称不能为空'));\r\n                    return;\r\n                }\r\n                if(onename.length>10){\r\n                    callback(new Error('名称不超过10个字符'));\r\n                    return;\r\n                }\r\n            }\r\n            callback();\r\n        };\r\n        return {\r\n            info:this.finfo,\r\n            basicrules:{\r\n                name:[{required:true, message:'请输入比赛名称',trigger:'blur'},\r\n                    {min:5, max:30,message:'长度在5到30个字符',trigger:'blur'}],\r\n                holders:[{type:'array',validator:holderVali,trigger:'blur'},\r\n                    {type:'array',max:3,message:'主办方个数不超过3个',trigger:'blur'}],\r\n                sponsor:[{type:'array',validator:holderVali,trigger:'blur'},\r\n                    {type:'array',max:5,message:'承办方个数不超过5个',trigger:'blur'}],\r\n                comtype:[{required:true, message:'必须指定一种比赛类型',trigger:'change'}],\r\n                details:[{required:true, message:'请输入比赛详细信息',trigger:'blur'},\r\n                    {min:5,max:1000,message:'长度在5到1000个字符之间',trigger:'blur'}],\r\n            },\r\n            signuprules:{\r\n                time:[{required:true,message:'请输入报名日期！',trigger:'blur'}],\r\n                person:[{type:'array',validator:signupVali,trigger:'blur'},\r\n                    {type:'array',max:10,message:'需要选手填写的个人信息条数不超过10个',trigger:'blur'}],\r\n                mode:[{required:true,message:'请输入报名形式！',trigger:'change'}],\r\n                group:[{type:'array',validator:signupVali,trigger:'blur'},\r\n                    {type:'array',max:10,message:'需要的队伍信息条数不超过10个',trigger:'blur'}],\r\n            },\r\n            comtypes:[\r\n                {label:'微信小程序',name:'type',value:'weixin'},\r\n                {label:'web开发',name:'type',value:'web'}]\r\n        }\r\n    },\r\n    methods:{\r\n        deleteStage: function (idx) {\r\n            this.info.splice(idx,1);\r\n        },\r\n        validate:function () {\r\n            var flag=true;\r\n            if(this.typeid<3){\r\n                this.$refs.info.validate((valid) => {\r\n                    if (valid) {\r\n                        flag = true;\r\n                    } else {\r\n                        flag = false;\r\n                    }\r\n                });\r\n                console.log(flag);\r\n                return flag;\r\n            }\r\n            else if(this.typeid==3){\r\n                for(let i of this.$refs.info){\r\n                    if(!(i.validate())){\r\n                        flag=false;\r\n                    }\r\n                }\r\n                return flag;\r\n            }\r\n        }\r\n    },\r\n}\r\n",{"version":3,"sources":["CompetitionInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CompetitionInfo.vue","sourceRoot":"..\\..\\components","sourcesContent":["<template>\r\n    <div>\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"center\"><el-col :span=6><div class=\"title\">——<slot></slot>——</div></el-col></el-row>\r\n    <template v-if=\"typeid == 1\"><el-form v-bind:model=\"info\" :rules=\"basicrules\" ref=\"info\" label-width=\"100px\" label-position=\"top\">\r\n        <el-row :gutter=20>\r\n            <el-col :span=10 :offset=5>\r\n        <el-form-item label=\"比赛名称\" prop=\"name\" label-width=\"100\">\r\n            <el-input v-model=\"info.name\"></el-input>\r\n        </el-form-item>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=20>\r\n            <el-col :span=20 :offset=5>\r\n        <el-form-item label=\"主办方\" required label-width=\"100\">\r\n            <el-row v-for=\"(item,index) in info.holders\" :key=\"item.key\">\r\n            <el-col :span=10>\r\n            <el-form-item  prop=\"holders\">\r\n                <el-input v-model=\"info.holders[index]\"></el-input>\r\n            </el-form-item>\r\n            </el-col>\r\n            </el-row>\r\n        </el-form-item>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row :gutter=20>\r\n            <el-col :offset=5>\r\n                <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle v-on:click=\"info.holders.push('')\"></el-button>\r\n                <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-minus\" circle v-on:click=\"info.holders.pop()\"></el-button>\r\n            </el-col>\r\n        </el-row>\r\n\r\n\r\n        <el-row :gutter=20>\r\n            <el-col :span=20 :offset=5>\r\n        <el-form-item label=\"承办方\" label-width=\"100\">\r\n            <el-row v-for=\"(item,index) in info.sponsors\" :key=\"item.key\">\r\n            <el-col :span=10>\r\n                <el-form-item   prop=\"sponsors\">\r\n                    <el-input v-model=\"info.sponsors[index]\"></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            </el-row>\r\n        </el-form-item>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row :gutter=20>\r\n            <el-col :offset=5>\r\n                <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle v-on:click=\"info.sponsors.push('')\"></el-button>\r\n                <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-minus\" circle v-on:click=\"info.sponsors.pop()\"></el-button>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=20>\r\n            <el-col :offset=5>\r\n        <el-form-item label=\"比赛类型\" prop=\"comtype\">\r\n            <el-radio-group v-model=\"info.comtype\">\r\n                <el-radio v-for=\"item in comtypes\" v-bind:label=\"item.label\" v-bind:value=\"item.value\" :key=\"item.key\"></el-radio>\r\n            </el-radio-group>\r\n        </el-form-item>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <el-row :gutter=20>\r\n            <el-col :offset=5 :span=10>\r\n                <el-form-item label=\"详细信息\" prop=\"details\" label-width=\"100\">\r\n                    <el-input type=\"textarea\" :rows=\"10\" placeholder=\"请输入详细信息\" v-model=\"info.details\">\r\n                    </el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n        </el-row>\r\n    </el-form> </template>\r\n\r\n    <template v-else-if=\"typeid == 2\">\r\n        <el-form v-bind:model=\"info\" :rules=\"signuprules\" ref=\"info\" label-width=\"100px\" label-position=\"top\">\r\n            <el-row :gutter=20>\r\n                <el-col :offset=5>\r\n                <el-form-item label=\"报名起止时间\" prop=\"time\">\r\n                    <el-date-picker v-model=\"info.time\" type=\"datetimerange\" start-placeholder=\"报名开始时间\" end-placeholder=\"报名结束时间\" :default-time=\"['00:00:00','23:59:59']\"></el-date-picker>\r\n                </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-row :gutter=20>\r\n                <el-col :span=20 :offset=5>\r\n                    <el-form-item label=\"需要选手填的个人信息\" label-width=\"100\" required>\r\n                        <el-row v-for=\"(item,index) in info.person\" :key=\"item.key\">\r\n                            <el-col :span=10>\r\n                                <el-form-item   prop=\"person\">\r\n                                    <el-input v-model=\"info.person[index]\"></el-input>\r\n                                </el-form-item>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row :gutter=20>\r\n                <el-col :offset=5>\r\n                    <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle v-on:click=\"info.person.push('')\"></el-button>\r\n                    <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-minus\" circle v-on:click=\"info.person.pop()\"></el-button>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-row :gutter=20>\r\n                <el-col :offset=5>\r\n                    <el-form-item label=\"报名形式\" prop=\"mode\">\r\n                        <el-radio-group v-model=\"info.mode\">\r\n                            <el-radio-button label=\"个人赛\"></el-radio-button>\r\n                            <el-radio-button label=\"组队赛\"></el-radio-button>\r\n                        </el-radio-group>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <template v-if=\"info.mode === '组队赛'\">\r\n                <el-row :gutter=20>\r\n                    <el-col :span=20 :offset=5>\r\n                        <el-form-item label=\"需要的队伍信息\" label-width=\"100\" required>\r\n                            <el-row v-for=\"(item,index) in info.group\" :key=\"item.key\">\r\n                                <el-col :span=10>\r\n                                    <el-form-item   prop=\"group\">\r\n                                        <el-input v-model=\"info.group[index]\"></el-input>\r\n                                    </el-form-item>\r\n                                </el-col>\r\n                            </el-row>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row :gutter=20>\r\n                    <el-col :offset=5>\r\n                        <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle v-on:click=\"info.group.push('')\"></el-button>\r\n                        <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-minus\" circle v-on:click=\"info.group.pop()\"></el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </template>\r\n        </el-form>\r\n    </template>\r\n        <template v-else-if=\"typeid == 3\">\r\n        <el-row v-for=\"(item,index) in info\" :key=\"item.key\">\r\n            <el-col>\r\n                <CompetitonStage v-bind:tinfo=\"item\" v-bind:index=\"index\" ref=\"info\"></CompetitonStage>\r\n            </el-col>\r\n        </el-row>\r\n            <el-row :gutter=20>\r\n                <el-col :span=10 :offset=5>\r\n                    <el-button type=\"primary\"  v-on:click=\"info.push({})\">添加阶段</el-button>\r\n                    <el-button type=\"primary\"  v-on:click=\"info.pop()\">删除阶段</el-button>\r\n                </el-col>\r\n            </el-row>\r\n\r\n        </template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport ElementUI from 'element-ui'\r\nVue.use(ElementUI);\r\n\r\nimport CompetitonStage from './CompetitonStage'\r\nexport default {\r\n    components:{\r\n        CompetitonStage,\r\n    },\r\n    props:['finfo','typeid'],\r\n    data:function () {\r\n        var self=this;\r\n        let testVali = function (rule,value,callback) {\r\n            console.log(value);\r\n            callback();\r\n        };\r\n        let holderVali = function (rule,value,callback) {\r\n            for (let onename of value){\r\n                if(onename.length==0){\r\n                    callback(new Error('名称不能为空'));\r\n                    return;\r\n                }\r\n                if(onename.length>30){\r\n                    callback(new Error('名称不超过30个字符'));\r\n                    return;\r\n                }\r\n            }\r\n          callback();\r\n        };\r\n        let signupVali = function (rule, value, callback) {\r\n            for (let onename of value){\r\n                if(onename.length==0){\r\n                    callback(new Error('名称不能为空'));\r\n                    return;\r\n                }\r\n                if(onename.length>10){\r\n                    callback(new Error('名称不超过10个字符'));\r\n                    return;\r\n                }\r\n            }\r\n            callback();\r\n        };\r\n        return {\r\n            info:this.finfo,\r\n            basicrules:{\r\n                name:[{required:true, message:'请输入比赛名称',trigger:'blur'},\r\n                    {min:5, max:30,message:'长度在5到30个字符',trigger:'blur'}],\r\n                holders:[{type:'array',validator:holderVali,trigger:'blur'},\r\n                    {type:'array',max:3,message:'主办方个数不超过3个',trigger:'blur'}],\r\n                sponsor:[{type:'array',validator:holderVali,trigger:'blur'},\r\n                    {type:'array',max:5,message:'承办方个数不超过5个',trigger:'blur'}],\r\n                comtype:[{required:true, message:'必须指定一种比赛类型',trigger:'change'}],\r\n                details:[{required:true, message:'请输入比赛详细信息',trigger:'blur'},\r\n                    {min:5,max:1000,message:'长度在5到1000个字符之间',trigger:'blur'}],\r\n            },\r\n            signuprules:{\r\n                time:[{required:true,message:'请输入报名日期！',trigger:'blur'}],\r\n                person:[{type:'array',validator:signupVali,trigger:'blur'},\r\n                    {type:'array',max:10,message:'需要选手填写的个人信息条数不超过10个',trigger:'blur'}],\r\n                mode:[{required:true,message:'请输入报名形式！',trigger:'change'}],\r\n                group:[{type:'array',validator:signupVali,trigger:'blur'},\r\n                    {type:'array',max:10,message:'需要的队伍信息条数不超过10个',trigger:'blur'}],\r\n            },\r\n            comtypes:[\r\n                {label:'微信小程序',name:'type',value:'weixin'},\r\n                {label:'web开发',name:'type',value:'web'}]\r\n        }\r\n    },\r\n    methods:{\r\n        deleteStage: function (idx) {\r\n            this.info.splice(idx,1);\r\n        },\r\n        validate:function () {\r\n            var flag=true;\r\n            if(this.typeid<3){\r\n                this.$refs.info.validate((valid) => {\r\n                    if (valid) {\r\n                        flag = true;\r\n                    } else {\r\n                        flag = false;\r\n                    }\r\n                });\r\n                console.log(flag);\r\n                return flag;\r\n            }\r\n            else if(this.typeid==3){\r\n                for(let i of this.$refs.info){\r\n                    if(!(i.validate())){\r\n                        flag=false;\r\n                    }\r\n                }\r\n                return flag;\r\n            }\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n.title{\r\n    text-align: center;\r\n    font-family: \"Adobe 黑体 Std R\";\r\n    font-size: large;\r\n}\r\n    .label{\r\n        font-size: 40px;\r\n    }\r\n</style>"]}]}